<!DOCTYPE html>
<html>
	<head>
		<title>Emmet</title>
	</head>
	<body>
    https://docs.emmet.io/
    <p class="item1"><div></div></p><a href=""></a><a href=""></a>
    <p class="item2"><div></div></p><a href=""></a><a href=""></a>
    <p class="item3"><div></div></p><a href=""></a><a href=""></a>
    <p class="item4"><div></div></p><a href=""></a><a href=""></a>
    <p class="item5"><div></div></p><a href=""></a><a href=""></a>
    dl>p.item$*5>div^^a*2+(header>ul>li*2>a)
    p.item$*5>div^a*2+(header>ul>li*2>a)
    (p.item>div^a*2+(header>ul>li*2>a))+(p.item>div^a*2+(header>ul>li*2>a))+(p.item>div^a*2+(header>ul>li*2>a))+(p.item>div^a*2+(header>ul>li*2>a))+(p.item>div^a*2+(header>ul>li*2>a))
    (p.item>div^a*2+(header>ul>li*2>a))+(p.item>div^a*2+(header>ul>li*2>a))+(p.item>div^a*2+(header>ul>li*2>a))+(p.item>div^a*2+(header>ul>li*2>a))+(p.item>div^a*2+(header>ul>li*2>a))
		<script type="text/javascript">
			function emmet(str) {
			    const keyToken = [
			        '>', // child
                    '+', // sibling
                    '^', // climb-up
                    '*', // multiplication
                    '(',
                    ')',
                    '#', // ID
                    '.', // class
                    '[',
                    ']', // attribute
                    '=', // in attribute
                    '$', // item numbering
                    '@',
                    '-', // changing numbering base and direction
                    '{',
                    '}' // text
                ];

			    str = str.replace(/#([^+>*^.]*)/gi, function(rs, val){return '[id="' + val + '"]'})
                    .replace(/\.([^+>*^#]*)/gi, function(rs, val){return '[class="' + val + '"]'}); // 将#id和.class替换为[]属性

                const tokenRegex = /(?<text>{.+?})|(?<group>\(.+?\))|(?<cal>[\$\@\-\d]*\*\d+)|(?<level>[\>\+\^]+)|(?<tag>[a-z]+(\[.+?\])*)/gi;
                const tokenList = str.match(tokenRegex);

                let curToken = [], preToken = null;
                while((curToken = tokenRegex.exec(str)) !== null){
                    let groups = curToken.groups;
                    if(groups.text){ // 标签，可能带有属性

                    }else if(groups.group){

                    }else if(groups.cal){

                    }else if(groups.level){

                    }else if(groups.tag){

                    }
                }

                return tokenList;
			}

			emmet('div#test[id="ccccabc"][class="aaaa"]>(header>ul>li*2>a)+footer>p$*55>div[class="ff"]+span+span');
		</script>
	</body>
</html>